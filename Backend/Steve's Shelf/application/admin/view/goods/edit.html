<!DOCTYPE html>
<html lang="zh-cn">
    {include file="public/head" title="商品修改" /}
    <style type="text/css">
    #sku .html table.skuTable{font-size:14px;color:#333;border-width:1px;border-color:#ddd;border-collapse:collapse}
    #sku .html table.skuTable th{border-width:1px;padding:5px 10px;border-style:solid;border-color:#ddd;color:#666;background-color:#ededed}
    #sku .html table.skuTable td{border-width:1px;padding:5px 10px;border-style:solid;border-color:#ddd;background-color:#fff;color:#666;widows:auto;text-align:center}
    .SKU_LIST{display: inline;}.SKU_LIST span{margin-left: 10px}
    </style>
    <body class="inside-header inside-aside is-dialog">
        <div id="main" role="main">
            <div class="tab-content tab-addtabs">
                <div id="content">
                    <div class="row">
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <section class="content-header hide">
                                <h1>
                                    控制台                                    <small>Control panel</small>
                                </h1>
                            </section>
                            <div class="content">
                                <form id="edit-form" class="form-horizontal" role="form" data-toggle="validator" method="POST" action="{:url('admin/goods/edit')}">
                                    <input name="goods_id" type="hidden" value="{$row['goods_id']}" />
                                    <div class="form-group">
                                        <label for="c-pid" class="control-label col-xs-12 col-sm-2">一级分类:</label>
                                        <div class="col-xs-12 col-sm-8">

                                            <select  id="category" data-rule="required" class="form-control selectpicker" >
                                                {volist name="category" id="v"}
                                                <option value="{$v.category_id}" {if $category_id['pid']==$v['category_id']}selected{/if}>|—{:str_repeat('—',$v['level'])}{$v.category_name}</option>
                                                {/volist}
                                            </select>

                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="c-category_er" class="control-label col-xs-12 col-sm-2">二級分类:</label>
                                        <div class="col-xs-5 col-sm-8">
                                            <select  id="category_er" data-rule="required" class="form-control selectpicker" name="row[category_id]">
                                                {volist name="allcategory" id="v"}
                                                <option value="{$v.category_id}" {if $row['category_id']==$v['category_id']}selected{/if}>|—{:str_repeat('—',$v['level'])}{$v.category_name}</option>
                                                {/volist}
                                            </select>
                                        </div>
                                    </div>

                                    <!--<div class="form-group">
                                        <label for="brandid" class="control-label col-xs-12 col-sm-2">所属品牌:</label>
                                        <div class="col-xs-12 col-sm-8">

                                            <select  id="brandid" data-rule="" class="form-control" name="row[brandid]">
                                                {if condition="$brandlist"}
												<option value="">暂无</option>
                                                {volist name="brandlist" id="v"}
                                                <option value="{$v.id}"  {if $row['brandid']==$v.id}selected{/if} >{$v.title}</option>
                                                {/volist}
                                                {else/}
                                                <option value="">暂无数据</option>
                                                {/if}
                                            </select>

                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="brandid" class="control-label col-xs-12 col-sm-2">选择供应商:</label>
                                        <div class="col-xs-12 col-sm-8">

                                            <select  id="supplier" data-rule="" class="form-control" name="row[supplier_id]">
                                                {if condition="$supplier"}
                                                {volist name="supplier" id="v"}
                                                <option value="{$v.id}"  {if $row['supplier_id']==$v.id}selected{/if} >{$v.supplier_title}</option>
                                                {/volist}
                                                {else/}
                                                <option value="">暂无供应商</option>
                                                {/if}
                                            </select>

                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="c-cargo_numbers" class="control-label col-xs-12 col-sm-2">商品货号:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="c-cargo_numbers" class="form-control" name="row[cargo_numbers]" type="text" value="{$row['cargo_numbers']}">
                                        </div>
                                    </div>-->
                                    <div class="form-group">
                                        <label for="c-goods_name" class="control-label col-xs-12 col-sm-2">商品名称:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input data-rule="required" class="form-control" name="row[goods_name]" type="text" value="{$row['goods_name']}" data-rule="required">
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="c-goods_numbers" class="control-label col-xs-12 col-sm-2">商品编号:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="c-goods_numbers" class="form-control" name="row[goods_numbers]" type="text" value="{$row['goods_numbers']}">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="c-price" class="control-label col-xs-12 col-sm-2">会员价:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="c-show_price-price" data-rule="required" class="form-control" name="row[show_price]" type="text" value="{$row['show_price']}" data-rule="required">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="c-price" class="control-label col-xs-12 col-sm-2">非会员价:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="c-price" data-rule="required" class="form-control" name="row[price]" type="text" value="{$row['price']}" data-rule="required">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="c-cost_price" class="control-label col-xs-12 col-sm-2">成本价:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="c-cost_price" data-rule="required" class="form-control" name="row[cost_price]" type="text" value="{$row['cost_price']}" data-rule="required">
                                        </div>
                                    </div>
                                   <!-- <div class="form-group">
                                        <label for="c-cost_price" class="control-label col-xs-12 col-sm-2">商品标签:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="c-active_name" data-rule="required" class="form-control" name="row[active_name]" type="text" value="{$row['active_name']}" data-rule="required">
                                        </div>
                                    </div>-->
                                    <div class="form-group">
                                        <label for="c-exchange_integral" class="control-label col-xs-12 col-sm-2">兑换积分:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="c-exchange_integral" data-rule="" class="form-control" name="row[exchange_integral]" type="text" value="{$row['exchange_integral']}" data-rule="required" onkeyup="this.value=this.value.replace(/[^\d.]/g,'')" onpaste="this.value=this.value.replace(/[^\d.]/g,'')">
                                            <span style="color: red;">如果设置0，则不返还积分（该积分为商品返还积分）</span>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="c-picture" class="control-label col-xs-12 col-sm-2">商品主图:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <div class="form-inline">
                                                <input id="c-picture" class="form-control" size="50" name="row[picture]" type="text" value="{$row['picture']}">

                                                <span><button type="button" id="plupload-picture" class="btn btn-danger plupload" data-multiple="false" data-maxsize="10737418240" data-input-id="c-picture" data-preview-id="p-picture"><i class="fa fa-upload"></i> 上传</button></span>

<!--                                                 <span><button type="button" id="fachoose-image" class="btn btn-primary fachoose" data-multiple="false" data-input-id="c-image"><i class="fa fa-list-ul"></i> 选择</button></span> -->
                                                
                                                <ul class="row list-inline plupload-preview" id="p-picture"></ul>
                                            </div>
                                        </div>
                                    </div>                                     
									<!--<div class="form-group">
                                        <label for="c-goods_banner" class="control-label col-xs-12 col-sm-2">商品banner图:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <div class="form-inline">
                                                <input id="c-goods_banner" class="form-control" size="50" name="row[goods_banner]" type="text" value="{$row['goods_banner']}">

                                                <span><button type="button" id="plupload-goods_banner" class="btn btn-danger plupload" data-multiple="false" data-maxsize="10737418240" data-input-id="c-goods_banner" data-preview-id="p-goods_banner"><i class="fa fa-upload"></i> 上传</button></span>

&lt;!&ndash;                                                 <span><button type="button" id="fachoose-image" class="btn btn-primary fachoose" data-multiple="false" data-input-id="c-image"><i class="fa fa-list-ul"></i> 选择</button></span> &ndash;&gt;
                                                
                                                <ul class="row list-inline plupload-preview" id="p-goods_banner"></ul>
                                            </div>
                                        </div>
                                    </div> -->
                                    <div class="form-group">
                                        <label for="c-image" class="control-label col-xs-12 col-sm-2">商品轮播图:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <div class="form-inline">
                                                <input id="c-image" class="form-control" size="50" name="row[images]" type="text" value="{:implode(',',$row['images'])}">

                                                <span><button type="button" id="plupload-image" class="btn btn-danger plupload" data-multiple="true" data-maxsize="10737418240" data-input-id="c-image" data-preview-id="p-image"><i class="fa fa-upload"></i> 上传</button></span>

<!--                                                 <span><button type="button" id="fachoose-image" class="btn btn-primary fachoose" data-multiple="false" data-input-id="c-image"><i class="fa fa-list-ul"></i> 选择</button></span> -->
                                                
                                                <ul class="row list-inline plupload-preview" id="p-image"></ul>
                                            </div>
                                        </div>
                                    </div>
									
                                    <div class="form-group">
                                        <label for="c-description" class="control-label col-xs-12 col-sm-2">商品介绍:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <div class="form-inline">
                                                <input id="c-description" class="form-control" size="50" name="row[description]" type="text" value="{$row['description']}">

                                                <span><button type="button" id="plupload-description" class="btn btn-danger plupload" data-multiple="true" data-maxsize="10737418240" data-input-id="c-description" data-preview-id="p-description"><i class="fa fa-upload"></i> 上传</button></span>

                                                <!--                                                 <span><button type="button" id="fachoose-image" class="btn btn-primary fachoose" data-multiple="false" data-input-id="c-image"><i class="fa fa-list-ul"></i> 选择</button></span> -->

                                                <ul class="row list-inline plupload-preview" id="p-description"></ul>
                                            </div>
                                        </div>
                                    </div>
                                    {if $attr}
                                    <div class="form-group">
                                        <label for="attribute_id" class="control-label col-xs-12 col-sm-2">商品类型:</label>
                                        <div class="col-xs-12 col-sm-8">

                                            <select  id="attribute_id" data-rule="required" class="form-control selectpicker" name="row[attr_id]">
                                                <option value="0">请选择商品类型</option>
                                                {volist name="attr" id="v"}
                                                <option value="{$v.attr_id}" {if $row['attr_id']==$v.attr_id}selected{/if}>{$v.attr_name}</option>
                                                {/volist}
                                            </select>

                                        </div>
                                    </div> 

                                    <div id="spec" style="display: none;">
                                        <div class="form-group">
                                            <label for="attribute_id" class="control-label col-xs-12 col-sm-2">商品规格:</label>
                                            <div class="col-xs-12 col-sm-8 html">

                                            </div>
                                        </div>
                                    </div>

                                    <div id="sku" style="display: none;">
                                        <div class="form-group">
                                            <label for="attribute_id" class="control-label col-xs-12 col-sm-2">商品库存:</label>
                                            <div class="col-xs-12 col-sm-8 html">

                                            </div>
                                        </div>
                                    </div>                                                      

                                    {/if}
                                    <div id="subject" style="display: none;">
                                        <div class="form-group">
                                            <label for="attribute_id" class="control-label col-xs-12 col-sm-2">商品主体属性:</label>
                                            <div class="col-xs-12 col-sm-8 html">

                                            </div>
                                        </div>
                                    </div>
                                    <div id="subject_val" style="">
                                        <div class="form-group">
                                            <label for="attribute_id" class="control-label col-xs-12 col-sm-2">主体属性值:</label>
                                            <div class="col-xs-12 col-sm-8 html">
                                                {foreach name="$subject.key" id="val" key="keys"}
                                                  {$subject['key'][$keys]}
                                                    <input name="subject_val[]" class="form-control" type="text" value="{$subject['val'][$keys]}">
                                                    <input name="subject_key[]" type="hidden" value="{$subject['key'][$keys]}">
                                                    <input name="subject_value[]" type="hidden" value="{$subject['subject_id'][$keys]}">
                                                {/foreach}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="c-unit" class="control-label col-xs-12 col-sm-2">单位:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="c-unit" data-rule="required" class="form-control" name="row[unit]" type="text" value="{$row['unit']}">
                                        </div>
                                    </div>
                                    <div class="form-group" style="display: none">
                                        <label for="c-commission" class="control-label col-xs-12 col-sm-2">佣金比率:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="c-commission" data-rule="required" class="form-control" name="row[commission]" type="number" value="{$row['commission']}">
                                        </div>
                                    </div>
<!--                                     <div class="form-group">
                                        <label for="c-freight" class="control-label col-xs-12 col-sm-2">运费:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="c-freight" data-rule="required" class="form-control" name="row[freight]" type="text" value="{$row['freight']}">
                                        </div>
                                    </div> -->

                                    <!--<div class="form-group">-->
                                        <!--<label for="c-stock" class="control-label col-xs-12 col-sm-2">库存:</label>-->
                                        <!--<div class="col-xs-12 col-sm-8">-->
                                            <!--<input id="c-stock" data-rule="required" class="form-control" name="row[stock]" type="text" value="{$row['stock']}">-->
                                        <!--</div>-->
                                    <!--</div>-->

                                    <div class="form-group">
                                        <label for="c-volume" class="control-label col-xs-12 col-sm-2">销量:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="c-volume" data-rule="required,digits" class="form-control" name="row[volume]" type="text"  value="{$row['volume']}">
                                        </div>
                                    </div>                                                                       
<!-- 
                                    <div class="form-group">
                                        <label for="c-keywords" class="control-label col-xs-12 col-sm-2">关键字:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="c-keywords" class="form-control" name="row[keywords]" type="text" value="{$row['keywords']}">
                                        </div>
                                    </div> -->

                                    <!--<div class="form-group">-->
                                        <!--<label for="c-introduction" class="control-label col-xs-12 col-sm-2">推荐位:</label>-->
                                        <!--<div class="col-xs-12 col-sm-8">-->
                                        <!--<div class="col-xs-12 col-sm-8">-->
                                            <!--&lt;!&ndash;<label><input {if in_array(1,$row['recommend'])}checked="checked"{/if} name="row[recommend][]" type="checkbox" value="1"> 特价</label> &ndash;&gt;-->
                                            <!--<label><input {if in_array(2,$row['recommend'])}checked="checked"{/if} name="row[recommend][]" type="checkbox" value="2"> 热销</label>-->
                                            <!--<label><input {if in_array(3,$row['recommend'])}checked="checked"{/if} name="row[recommend][]" type="checkbox" value="3"> 推荐</label>-->
                                        <!--</div>-->
                                        <!--</div>-->
                                    <!--</div>                                     -->
                                    <div class="form-group">
                                        <label class="control-label col-xs-12 col-sm-2">特价商品:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <label>
                                                <input {if $row['is_recom_today']=='1'}checked="checked"{/if} name="row[is_recom_today]" type="radio" value="1"> 是
                                            </label>
                                            <label>
                                                <input {if $row['is_recom_today']=='0'}checked="checked"{/if} name="row[is_recom_today]" type="radio" value="0"> 否
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-xs-12 col-sm-2">为您推荐:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <label>
                                                <input {if $row['is_recommend']=='1'}checked="checked"{/if} name="row[is_recommend]" type="radio" value="1"> 是
                                            </label>
                                            <label>
                                                <input {if $row['is_recommend']=='0'}checked="checked"{/if}  name="row[is_recommend]" type="radio" value="0"> 否
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-xs-12 col-sm-2">猜您喜欢:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <label>
                                                <input {if $row['is_like']=='1'}checked="checked"{/if}  name="row[is_like]" type="radio" value="1"> 是
                                            </label>
                                            <label>
                                                <input {if $row['is_like']=='0'}checked="checked"{/if} name="row[is_like]" type="radio" value="0"> 否
                                            </label>
                                        </div>
                                    </div>
                                    <!-- <div class="form-group">
                                        <label for="c-introduction" class="control-label col-xs-12 col-sm-2">简介:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="c-introduction" class="form-control" name="row[introduction]" value="{$row['introduction']}" type="text">
                                        </div>
                                    </div>                                     -->

                                    <!--<div class="form-group">-->
                                        <!--<label for="c-description" class="control-label col-xs-12 col-sm-2">描述:</label>-->
                                        <!--<div class="col-xs-12 col-sm-8">-->
                                            <!--<textarea id="c-description" class="form-control summernote" name="row[description]">{$row['description']}</textarea>-->
                                        <!--</div>-->
                                    <!--</div>-->
                                    <div class="form-group">
                                        <label for="c-weigh" class="control-label col-xs-12 col-sm-2">权重:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="c-weigh" class="form-control" name="row[weigh]" type="number" value="{$row['weigh']}">
                                        </div>
                                    </div>
                                    <!-- 是否为大礼包商品 -->
                                    <!-- <div class="form-group">
                                        <label for="c-status" class="control-label col-xs-12 col-sm-2">大礼包商品:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <label for="is_gift_y">
                                                <input id="s_gift_y" {if $row['is_gift']=='1'}checked="checked"{/if} name="row[is_gift]" type="radio" value="1"> 是
                                            </label>
                                            <label for="s_gift_n">
                                                <input id="s_gift_n" {if $row['is_gift']=='0'}checked="checked"{/if} name="row[is_gift]" type="radio" value="0"> 否
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="c-status" class="control-label col-xs-12 col-sm-2">自有产品:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <label for="is_self_y">
                                                <input id="s_self_y" name="row[is_self]" type="radio" value="1" {if $row['is_self']=='1'}checked="checked"{/if}> 是
                                            </label>
                                            <label for="s_self_n">
                                                <input id="s_self_n" checked="checked" name="row[is_self]" type="radio" value="0" {if $row['is_self']=='0'}checked="checked"{/if}> 否
                                            </label>
                                        </div>
                                    </div> -->

                                    <div class="form-group">
                                        <label for="c-status" class="control-label col-xs-12 col-sm-2">状态:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <label for="row[status]-normal"><input id="row[status]-normal" {if $row['status']=='0'}checked="checked"{/if} name="row[status]" type="radio" value="0"> 立即上架</label>
                                            <label for="row[status]-hidden"><input id="row[status]-hidden" {if $row['status']=='1'}checked="checked"{/if} name="row[status]" type="radio" value="1"> 放入仓库</label>
                                        </div>
                                    </div>
                                    <div class="form-group layer-footer">
                                        <label class="control-label col-xs-12 col-sm-2"></label>
                                        <div class="col-xs-12 col-sm-8">
                                            <button type="submit" class="btn btn-success btn-embossed disabled">确定</button>
                                            <button type="reset" class="btn btn-default btn-embossed">重置</button>
                                        </div>
                                    </div>
                                </form>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script type="text/javascript">
        var attribute_url="{:url('admin/goods/attributeInfo')}";
        var getcatebrand_url="{:url('admin/goods/getCatebrand')}";
        var spec=JSON.parse('{:json_encode($row.spec)}');
        var sku=JSON.parse('{:json_encode($sku)}');
        var subject=JSON.parse('{:json_encode($subject)}');
        var getGoodsSup_url="{:url('admin/goods/getGoodsSup')}";
        var getSecondName="{:url('admin/goods/getSecondName')}";
        </script>        
        {include file="public/javascript" jsname="backend/goods/index" controllername="index"  actionname="add"/}
    </body>
</html>