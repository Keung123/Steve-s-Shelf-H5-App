<!DOCTYPE html>
<html lang="zh-cn">
<script type="text/javascript" src="__STATIC__/assets/js/laydate/laydate.js"></script>
<script type="text/javascript" src="__STATIC__/assets/js/jquery.min.js"></script>
<script type="text/javascript" src="__STATIC__/assets/js/layer/layer.min.js"></script>
    {include file="public/head" title="商品添加" /}
    <style type="text/css">
    #sku .html table.skuTable{font-size:14px;color:#333;border-width:1px;border-color:#ddd;border-collapse:collapse}
    #sku .html table.skuTable th{border-width:1px;padding:5px 10px;border-style:solid;border-color:#ddd;color:#666;background-color:#ededed}
    #sku .html table.skuTable td{border-width:1px;padding:5px 10px;border-style:solid;border-color:#ddd;background-color:#fff;color:#666;widows:auto;text-align:center}
    .SKU_LIST{display: inline;}.SKU_LIST span{margin-left: 10px}
    </style>
    <body class="inside-header inside-aside is-dialog">
        <div id="main" role="main">
            <div class="tab-content tab-addtabs">
                <div id="content">
                    <div class="row">
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <section class="content-header hide">
                                <h1>
                                    控制台                                    <small>Control panel</small>
                                </h1>
                            </section>
                            <div class="content">
                                <form id="edit-form" class="form-horizontal" role="form" data-toggle="validator" method="POST" action="{:url('admin/goods/teamspelledit')}">

                                    <div class="form-group">
                                        <label for="c-pid" class="control-label col-xs-12 col-sm-2">栏目选择分类查询:</label>
                                        <div class="col-xs-12 col-sm-8">

                                            <select  id="category" data-rule="required" class="form-control selectpicker" >
                                                {volist name="category" id="v"}
                                                <option value="{$v.category_id}" {if $category_id['pid']==$v['category_id']}selected{/if}>|—{:str_repeat('—',$v['level'])}{$v.category_name}</option>
                                                {/volist}
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="c-category_id" class="control-label col-xs-12 col-sm-2">栏目选择:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <select  id="category_er" data-rule="required" class="form-control selectpicker" >
                                                <option value="0"> 选择二级栏目</option>
                                                {volist name="allcategory" id="v"}
                                                <option value="{$v.category_id}" {if $row['goryid']==$v['category_id']}selected{/if}>|—{:str_repeat('—',$v['level'])}{$v.category_name}</option>
                                                {/volist}
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="c-goods_name" class="control-label col-xs-12 col-sm-2">商品名称:</label>
                                        <div class="col-xs-12 col-sm-8" >
                                            <select name="row[goods_id]" id="goods_name" class="form-control">
                                                {volist name="goods_list" id="v"}
                                                <option value="{$v.goods_id}"  {if condition="$row['goods_id'] eq $v['goods_id']"}selected{/if} data-price="{$v.price}">{$v.goods_name}</option>
                                                {/volist}
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="c-goods_stock" class="control-label col-xs-12 col-sm-2">库存:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="c-goods_stock" data-rule="required" class="form-control" type="text"  value="{$row['stock']}" readonly>
                                        </div>
                                    </div>
                                    <input type="hidden" name="id" value="{$row['id']}">
                                    <input type="hidden" name="row[goods_name]" value="{$row['goods_name']}" id="goodsname">
                                    <div class="form-group">
                                        <label for="c-goods_price" class="control-label col-xs-12 col-sm-2">商品价格:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="c-goods_price" data-rule="required" class="form-control"  name="row[price]" type="text" value="{$row['goods_price']}" readonly>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="c-goods_name" class="control-label col-xs-12 col-sm-2">商品属性:</label>
                                        <div class="col-xs-12 col-sm-8" id="sku">
                                            {volist name="skus" id="vv"}
                                            <label><input  class="sku_list"  type="radio" name="row[sku_id]"  {if condition="$row['sku_id'] eq $vv['sku_id']"}checked{/if} value="{$vv.sku_id}" data-price="{$vv.price}"/>{$vv.sku_name}<label/>
                                                {/volist}
                                                <!--<label><input    type="radio" name="row[price_type]" checked value="0" onclick="typeChange();"/>
                                                    减价<label/>
                                                    <label><input   type="radio" name="row[price_type]" value="1"  onclick="typeChange();"/>折扣<label/>-->

                                        </div>
                                    </div>
									<div class="form-group">
                                        <label for="c-goods_name" class="control-label col-xs-12 col-sm-2">优惠类型:</label>
										<div class="col-xs-12 col-sm-8" >
										 <label><input    type="radio" name="row[price_type]"  value="0" onclick="typeChange()" {if condition="$row.price_type eq 0"}checked="checked"{/if}/> 
										 减价<label/>
										 <label><input   type="radio" name="row[price_type]" value="1"  onclick="typeChange()" {if condition="$row.price_type eq 1"}checked="checked"{/if}/>折扣<label/>
											 
										</div>
                                    </div>
									
									<div class="form-group" id="reduce">
                                        <label for="c-price_reduce" class="control-label col-xs-12 col-sm-2">减价力度:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="jianjia" class="form-control"   type="text" value='{$row.price_reduce}'  >
                                        </div>
                                    </div>  
 
									
                                    <div class="form-group" id="onSale">
                                        <label for="c-price_reduce" class="control-label col-xs-12 col-sm-2"> 折扣百分比（x%）:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="zhekou"    class="form-control"   type="text" value="{$row.price_reduce}"  >
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="c-goods_number" class="control-label col-xs-12 col-sm-2">商品总数:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="c-goods_number" data-rule="required" class="form-control" name="row[goods_number]" type="text" value="{$row['goods_number']}">
                                        </div>
                                    </div>

                                   <div class="form-group"> 
                                       <label for="c-time_limit" class="control-label col-xs-12 col-sm-2">成团有效时间(/分钟):</label> 
                                         <div class="col-xs-12 col-sm-8"> 
                                            <input id="c-time_limit" data-rule="required" class="form-control"   name="row[time_limit]" value="{$row['time_limit']} " type="text" {if condition="$isEdit eq 1"}disabled{/if}> 
                                       </div> 
                                     </div> 
                                    <div class="form-group">
                                        <label for="c-need_num" class="control-label col-xs-12 col-sm-2">需要拼团的人数:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="c-need_num" data-rule="required" class="form-control" name="row[need_num]"  value="{$row['need_num']}" type="text"  >
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="c-sort" class="control-label col-xs-12 col-sm-2"> 排序</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="c-sort" data-rule="required" class="form-control"  name="row[sort]" value="{$row['sort']}" type="text">
                                        </div>
                                    </div>
　
                                    <div class="form-group">
                                        <label for="c-status" class="control-label col-xs-12 col-sm-2">状态:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <label for="row[status]-normal"><input id="row[status]-normal"  name="row[status]" type="radio" value="0" {if condition="$row.status eq 0"}checked="checked"{/if} > 正常</label>
                                            <label for="row[status]-hidden"><input id="row[status]-hidden" name="row[status]"  type="radio" value="1" {if condition="$row.status eq 1"}checked="checked"{/if} > 结束</label>
                                        </div>
                                    </div>
                                    <div class="form-group layer-footer">
                                        <label class="control-label col-xs-12 col-sm-2"></label>
                                        <div class="col-xs-12 col-sm-8">
                                            <button type="submit" class="btn btn-success btn-embossed disabled">确定</button>
                                            <button type="reset" class="btn btn-default btn-embossed">重置</button>
                                        </div>
                                    </div>
                                </form>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script type="text/javascript">
        var attribute_url="{:url('goods/attributeInfo')}";
        var getcatebrand_url="{:url('goods/getCatebrand')}";
        var getGoodsInfo_url="{:url('goods/getGoodsInfo')}";
        var getGoodsName="{:url('goods/getGoodsName')}";
        var getSecondName="{:url('goods/getSecondName')}";
        </script>
        {include file="public/javascript" jsname="backend/goods/groupgou" controllername="index"  actionname="add"/}
    </body>
	
	  <script type="text/javascript">
					window.onload = typeChange();
					//select的onchange调用函数
					function typeChange(){
						var countrySelect = document.getElementsByName('row[price_type]');//获取select的dom
						 
						var reduce = document.getElementById('reduce');
						var onSale = document.getElementById('onSale');
						var jianjia = document.getElementById('jianjia');
						var zhekou = document.getElementById('zhekou');
					 
						if(countrySelect[1].checked == true){
						
							  reduce.style.display="none";
							  onSale.style.display="block";
							  jianjia.setAttribute('name','');								  
							  zhekou.setAttribute('name','row[price_reduce]');						  

						}else{
							  onSale.style.display="none";  
							  reduce.style.display="block";
							  zhekou.setAttribute('name','');						  
							 jianjia.setAttribute('name','row[price_reduce]');	
						} 
						
				}
			  </script>  
</html>